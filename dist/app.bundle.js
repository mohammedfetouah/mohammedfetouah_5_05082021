(()=>{class t{constructor(t,e,o,a,n,i){this._id=t,this.price=e,this.name=o,this.imageUrl=a,this.description=n,this.colors=i}getHtml(){return'<a href="produit.html?id='+this._id+'" class="produits"> <div><img class="produit-image" src="'+this.imageUrl+'" alt="nounours"></div><div class="produit-description"><div class="produit-name"><span>'+this.name+'</span></div> <div class="produit-price">  <span> '+this.price/100+"€</span></div></div></a>"}getHtmlProduit(){var t="";for(let e of this.colors)t+='<option value="'+e+'">'+e+"</option>";return'<div class="produit"> <div><img class="produit-image" src="'+this.imageUrl+'" alt="nounours"></div><div class="produit-description"><div class="produit-name"><span>'+this.name+'</span></div> <div class="produit-price">     <span> '+this.description+'</span></div> <div class="produit-price">  <span> '+this.price/100+'€</span></div><select name="colors">'+t+'</select><select name="quantite" id="addQuantity"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select><button id="addPanier">  ajouter au panier </button></div>'}}var e=new class{addProduct(t,e,o){var a=localStorage.getItem("panier");a=a?JSON.parse(a):[];for(var n=1;n<o;n++)a.push(t);a.push(t),localStorage.setItem("panier",JSON.stringify(a));var i=localStorage.getItem("panierTotal");i?(i=parseInt(i),i+=parseInt(e)*o,localStorage.setItem("panierTotal",i)):localStorage.setItem("panierTotal",e*o)}getProduits(){var t=localStorage.getItem("panier");return JSON.parse(t)}getTotal(){return localStorage.getItem("panierTotal")}getQuantity(){return localStorage.getItem("quantite")}},o=new class{addCommande(){var t={};t.nom=document.querySelector('#cordonnees input[name="nom"]').value,t.prenom=document.querySelector('#cordonnees input[name="prenom"]').value,t.email=document.querySelector('#cordonnees input[name="email"]').value,t.postal=document.querySelector('#cordonnees input[name="postal"]').value,t.ville=document.querySelector('#cordonnees input[name="ville"] ').value,t.adresse=document.querySelector('#cordonnees input[name="adresse"]').value,console.log(t),localStorage.setItem("formulaire",JSON.stringify(t));var e=localStorage.getItem("panier"),o=localStorage.getItem("panierTotal");localStorage.setItem("panierCommande",e),localStorage.setItem("totalCommande",o),localStorage.removeItem("panier"),localStorage.removeItem("panierTotal")}getCommande(){localStorage.getItem("panierCommande"),localStorage.getItem("formulaire"),localStorage.getItem("panierTotal")}};if("/"==window.location.pathname&&fetch("http://localhost:3000/api/teddies").then((function(t){if(t.ok)return t.json()})).then((function(e){for(produitData of e){var o=new t(produitData._id,produitData.price,produitData.name,produitData.imageUrl,produitData.description,produitData.colors);document.getElementById("container").innerHTML+=o.getHtml()}})).catch((function(t){})),"/produit.html"==window.location.pathname){var a=window.location.href,n=new URL(a).searchParams.get("id");fetch("http://localhost:3000/api/teddies/"+n).then((function(t){if(t.ok)return t.json();window.location.href="http://localhost:8080/"})).then((function(o){var a=new t(o._id,o.price,o.name,o.imageUrl,o.description,o.colors);document.getElementById("containerProduit").innerHTML+=a.getHtmlProduit(),document.getElementById("addPanier").addEventListener("click",(function(t){var a=document.getElementById("addQuantity").value;e.addProduct(o._id,o.price,a)}))})).catch((function(t){}))}if("/panier.html"==window.location.pathname){if(document.getElementById("clearPanier").addEventListener("click",(function(){localStorage.clear(),window.location.href="http://localhost:8080/panier.html"})),e.getProduits()){document.getElementById("total").innerHTML+="<div><b>Total panier : </b>"+e.getTotal()/100+"€</div>";var i={},r=[];for(n of e.getProduits())i[n]?i[n]+=1:(i[n]=1,r.push(n));for(n of r)fetch("http://localhost:3000/api/teddies/"+n).then((function(t){if(t.ok)return t.json();window.location.href="http://localhost:8080/"})).then((function(t){document.getElementById("produits").innerHTML+='<div class="produit"><span class="name">'+t.name+'</span><span class="qty"> '+i[t._id]+" </span></div>"})).catch((function(t){}))}document.getElementById("cordonnees").addEventListener("submit",(function(t){t.preventDefault(),o.addCommande(),window.location.href="http://localhost:8080/commande.html"}))}"/commande.html"==window.location.pathname&&fetch("http://localhost:3000/api/teddies/").then((function(t){if(t.ok)return t.json();window.location.href="http://localhost:8080/"})).then((function(e){console.log(e),new t(e._id,e.price,e.name,e.imageUrl,e.description,e.colors),document.getElementById("commande").innerHTML+="<div>NaN"})).catch((function(t){}))})();