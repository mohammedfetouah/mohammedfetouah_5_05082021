(()=>{class t{constructor(t,e,o,a,i,n){this._id=t,this.price=e,this.name=o,this.imageUrl=a,this.description=i,this.colors=n}getHtml(){return'<a href="produit.html?id='+this._id+'" class="produits"> <div><img class="produit-image" src="'+this.imageUrl+'" alt="nounours"></div><div class="produit-description"><div class="produit-name"><span>'+this.name+'</span></div> <div class="produit-price">  <span> '+this.price/100+"€</span></div></div></a>"}getHtmlProduit(){var t="";for(let e of this.colors)t+='<option value="'+e+'">'+e+"</option>";return'<div class="produit"> <div><img class="produit-image" src="'+this.imageUrl+'" alt="nounours"></div><div class="produit-description"><div class="produit-name"><span>'+this.name+'</span></div> <div class="produit-price">     <span> '+this.description+'</span></div> <div class="produit-price">  <span> '+this.price/100+'€</span></div><select name="colors">'+t+'</select><button id="addPanier">  ajouter au panier </button></div>'}getHtmlQuantity(){return'<select name="quantite" id="addQuantity"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select>'}}var e=new class{addProduct(t,e,o){var a=localStorage.getItem("colors");(a=a?JSON.parse(a):[]).push(o),localStorage.setItem("colors",JSON.stringify(a));var i=localStorage.getItem("panier");i=i?JSON.parse(i):[];for(var n=1;n<quantity;n++)i.push(t);i.push(t),localStorage.setItem("panier",JSON.stringify(i));var r=localStorage.getItem("panierTotal");r?(r=parseInt(r),r+=parseInt(e)*quantity,localStorage.setItem("panierTotal",r)):localStorage.setItem("panierTotal",e*quantity)}getProduits(){var t=localStorage.getItem("panier");return JSON.parse(t)}getTotal(){return localStorage.getItem("panierTotal")}getQuantity(){return localStorage.getItem("quantite")}};if(new class{addCommande(){var t={};t.nom=document.querySelector('#cordonnees input[name="nom"]').value,t.prenom=document.querySelector('#cordonnees input[name="prenom"]').value,t.email=document.querySelector('#cordonnees input[name="email"]').value,t.postal=document.querySelector('#cordonnees input[name="postal"]').value,t.ville=document.querySelector('#cordonnees input[name="ville"] ').value,t.adresse=document.querySelector('#cordonnees input[name="adresse"]').value,localStorage.setItem("formulaire",JSON.stringify(t));var e=localStorage.getItem("panier"),o=localStorage.getItem("panierTotal");localStorage.setItem("panierCommande",e),localStorage.setItem("totalCommande",o),localStorage.removeItem("panier"),localStorage.removeItem("panierTotal")}getCommande(){return console.log(localStorage.getItem("formulaire").nom),{panier:JSON.parse(localStorage.getItem("panierCommande")),formulaire:JSON.parse(localStorage.getItem("formulaire")),total:JSON.parse(localStorage.getItem("totalCommande"))}}},"/"==window.location.pathname&&fetch("http://localhost:3000/api/teddies").then((function(t){if(t.ok)return t.json()})).then((function(e){for(produitData of e){var o=new t(produitData._id,produitData.price,produitData.name,produitData.imageUrl,produitData.description,produitData.colors);document.getElementById("container").innerHTML+=o.getHtml()}})).catch((function(t){})),"/produit.html"==window.location.pathname){var o=window.location.href,a=new URL(o).searchParams.get("id");fetch("http://localhost:3000/api/teddies/"+a).then((function(t){if(t.ok)return t.json();window.location.href="http://localhost:8080/"})).then((function(o){var a=new t(o._id,o.price,o.name,o.imageUrl,o.description,o.colors);document.getElementById("containerProduit").innerHTML+=a.getHtmlProduit(),document.getElementById("addPanier").addEventListener("click",(function(t){e.addProduct(o._id,o.price,o.colors),window.location.href="http://localhost:8080/",window.alert("l'article a bien était ajoutée au panier !")}))})).catch((function(t){}))}})();